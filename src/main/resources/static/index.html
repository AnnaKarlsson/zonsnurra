<!DOCTYPE html>
<html lang="en">
<head>
  <title>Zonsnurra</title>
  <meta charset="utf-8">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script>

    function displaySport(answer) {
      document.getElementById('swimBlock').style.display = "none";
      document.getElementById('bikeBlock').style.display = "none";
      document.getElementById('runBlock').style.display = "none";

      if (answer == "swim") {
        document.getElementById('swimBlock').style.display = "block";
        displayMeasure("time");
      } else if (answer == "bike") {
        document.getElementById('bikeBlock').style.display = "block";
        displayMeasure("");
      } else if (answer == "run") {
        document.getElementById('runBlock').style.display = "block";
        displayMeasure("");
      }
    }

    function displayMeasure(answer) {
      document.getElementById('timeBlock').style.display = "none";
      document.getElementById('pulseBlock').style.display = "none";
      document.getElementById('wattBlock').style.display = "none";

      if (answer == "time") {
        document.getElementById('timeBlock').style.display = "block";
      } else if (answer == "pulse") {
        document.getElementById('pulseBlock').style.display = "block";
      } else if (answer == "watt") {
        document.getElementById('wattBlock').style.display = "block";
      }
    }

    function send(type, measure) {
      var sport = document.getElementById('sport').value;
      var url = "/" + sport + "/" + type + "/" + measure;
      console.log("URL: " + url);

      $.getJSON(url, function (data) {
        var items = [];
        $.each(data, function (key, val) {
          items.push("<li id='" + key + "'>" + key + ": " + val + "</li>");
        });

        document.getElementById("result").innerHTML = "<ul>"+items.join("") + "</ul>";
      });
    }

    function submitWatt() {
      send("watt", document.getElementById('watt').value);
    }

    function submitPulse() {
      send("pulse", document.getElementById('pulse').value);
    }

    function submitTime() {
      send("time", document.getElementById('min').value + "/" + document.getElementById('sec').value);
    }


  </script>
</head>
<body>

<form>
  <label for="sport">Sport</label>
  <select id="sport" onchange="displaySport(this.value)">
    <option id="swim" value="swim">Swim</option>
    <option id="bike" value="bike">Bike</option>
    <option id="run" value="run">Run</option>
  </select>
  <br/>
  <hr>
  <br/>
  <div id="swimBlock" style="display:block;">

  </div>

  <div id="bikeBlock" style="display:none;"><br/>
    <label for="radio-bike-watt">Watt</label>
    <input type="radio" id="radio-bike-watt" name="radio-bike" value="watt" onchange="displayMeasure(this.value)">

    <label for="radio-bike-watt">Pulse</label>
    <input type="radio" id="radio-bike-pulse" name="radio-bike" value="pulse" onchange="displayMeasure(this.value)">
  </div>

  <div id="runBlock" style="display:none;"><br/>
    <label for="radio-run-time">Time</label>
    <input type="radio" id="radio-run-time" name="radio-run" value="time" onchange="displayMeasure(this.value)">

    <label for="radio-run-pulse">Pulse</label>
    <input type="radio" id="radio-run-pulse" name="radio-run" value="pulse" onchange="displayMeasure(this.value)">
  </div>

  <div id="timeBlock" style="display:block;">
    <label for="min">Tid (min:sec):</label>
    <input type="number" id="min" min="1" max="15">:
    <input type="number" id="sec" min="0" max="60">
    <br/>
    <input type="button" value="GO" onclick="submitTime()">
  </div>
  <div id="pulseBlock" style="display:none;">
    <label for="pulse">Pulse</label>
    <input type="number" id="pulse" max="300" min="0">
    <br/>
    <input type="button" value="GO" onclick="submitPulse()">
  </div>
  <div id="wattBlock" style="display:none;">
    <label for="watt">Watt</label>
    <input type="number" id="watt" max="600" min="50">
    <br/>
    <input type="button" value="GO" onclick="submitWatt()">
  </div>
</form>

<hr>
<div id="result">

</div>
</body>
</html>